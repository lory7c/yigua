<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ€§èƒ½ç›‘æ§Dashboard - æ˜“å¦APP</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        h1 {
            color: white;
            text-align: center;
            margin-bottom: 30px;
            font-size: 2.5em;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }
        
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .metric-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .metric-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0,0,0,0.3);
        }
        
        .metric-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .metric-title {
            font-size: 1.2em;
            font-weight: 600;
            color: #333;
        }
        
        .metric-icon {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5em;
        }
        
        .metric-value {
            font-size: 2.5em;
            font-weight: bold;
            margin: 10px 0;
        }
        
        .metric-target {
            font-size: 0.9em;
            color: #666;
            margin-bottom: 10px;
        }
        
        .metric-status {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.85em;
            font-weight: 600;
            text-transform: uppercase;
        }
        
        .status-success {
            background: #10b981;
            color: white;
        }
        
        .status-warning {
            background: #f59e0b;
            color: white;
        }
        
        .status-error {
            background: #ef4444;
            color: white;
        }
        
        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e5e7eb;
            border-radius: 4px;
            overflow: hidden;
            margin-top: 10px;
        }
        
        .progress-fill {
            height: 100%;
            border-radius: 4px;
            transition: width 0.5s ease;
        }
        
        .progress-success {
            background: linear-gradient(90deg, #10b981, #34d399);
        }
        
        .progress-warning {
            background: linear-gradient(90deg, #f59e0b, #fbbf24);
        }
        
        .progress-error {
            background: linear-gradient(90deg, #ef4444, #f87171);
        }
        
        .chart-container {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            margin-bottom: 20px;
        }
        
        .chart-title {
            font-size: 1.3em;
            font-weight: 600;
            color: #333;
            margin-bottom: 20px;
        }
        
        canvas {
            max-width: 100%;
            height: auto;
        }
        
        .optimization-tips {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        .tip-item {
            padding: 15px;
            margin-bottom: 10px;
            border-left: 4px solid #667eea;
            background: #f9fafb;
            border-radius: 4px;
        }
        
        .tip-title {
            font-weight: 600;
            color: #333;
            margin-bottom: 5px;
        }
        
        .tip-description {
            color: #666;
            font-size: 0.9em;
            line-height: 1.5;
        }
        
        .real-time-indicator {
            display: inline-block;
            width: 8px;
            height: 8px;
            background: #10b981;
            border-radius: 50%;
            margin-right: 5px;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% {
                box-shadow: 0 0 0 0 rgba(16, 185, 129, 0.7);
            }
            70% {
                box-shadow: 0 0 0 10px rgba(16, 185, 129, 0);
            }
            100% {
                box-shadow: 0 0 0 0 rgba(16, 185, 129, 0);
            }
        }
        
        .control-panel {
            background: white;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        .control-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-primary {
            background: #667eea;
            color: white;
        }
        
        .btn-primary:hover {
            background: #5a67d8;
            transform: translateY(-2px);
        }
        
        .btn-success {
            background: #10b981;
            color: white;
        }
        
        .btn-warning {
            background: #f59e0b;
            color: white;
        }
        
        .time-range {
            display: flex;
            gap: 10px;
            align-items: center;
            margin-top: 15px;
        }
        
        select {
            padding: 8px 12px;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            font-size: 0.9em;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸš€ æ€§èƒ½ç›‘æ§Dashboard</h1>
        
        <!-- æ§åˆ¶é¢æ¿ -->
        <div class="control-panel">
            <div class="control-buttons">
                <button class="btn btn-primary" onclick="refreshData()">åˆ·æ–°æ•°æ®</button>
                <button class="btn btn-success" onclick="runBenchmark()">è¿è¡ŒåŸºå‡†æµ‹è¯•</button>
                <button class="btn btn-warning" onclick="optimizeSystem()">ä¸€é”®ä¼˜åŒ–</button>
            </div>
            <div class="time-range">
                <label>æ—¶é—´èŒƒå›´:</label>
                <select id="timeRange" onchange="updateTimeRange()">
                    <option value="1h">æœ€è¿‘1å°æ—¶</option>
                    <option value="6h">æœ€è¿‘6å°æ—¶</option>
                    <option value="24h" selected>æœ€è¿‘24å°æ—¶</option>
                    <option value="7d">æœ€è¿‘7å¤©</option>
                </select>
                <span class="real-time-indicator"></span>
                <span style="color: #666; font-size: 0.9em;">å®æ—¶ç›‘æ§ä¸­</span>
            </div>
        </div>
        
        <!-- æ€§èƒ½æŒ‡æ ‡å¡ç‰‡ -->
        <div class="dashboard-grid">
            <!-- PDFå¤„ç†æ€§èƒ½ -->
            <div class="metric-card">
                <div class="metric-header">
                    <div class="metric-title">PDFæ‰¹å¤„ç†</div>
                    <div class="metric-icon" style="background: #eef2ff; color: #667eea;">ğŸ“„</div>
                </div>
                <div class="metric-value" id="pdfThroughput" style="color: #667eea;">0</div>
                <div class="metric-target">ç›®æ ‡: 200æ–‡ä»¶/å°æ—¶</div>
                <span class="metric-status status-warning" id="pdfStatus">æ£€æµ‹ä¸­</span>
                <div class="progress-bar">
                    <div class="progress-fill progress-warning" id="pdfProgress" style="width: 0%"></div>
                </div>
            </div>
            
            <!-- SQLiteæŸ¥è¯¢æ€§èƒ½ -->
            <div class="metric-card">
                <div class="metric-header">
                    <div class="metric-title">SQLiteæŸ¥è¯¢</div>
                    <div class="metric-icon" style="background: #f0fdf4; color: #10b981;">ğŸ—„ï¸</div>
                </div>
                <div class="metric-value" id="sqliteLatency" style="color: #10b981;">0ms</div>
                <div class="metric-target">ç›®æ ‡: <5ms (P95)</div>
                <span class="metric-status status-success" id="sqliteStatus">æ­£å¸¸</span>
                <div class="progress-bar">
                    <div class="progress-fill progress-success" id="sqliteProgress" style="width: 0%"></div>
                </div>
            </div>
            
            <!-- Flutteræ¸²æŸ“æ€§èƒ½ -->
            <div class="metric-card">
                <div class="metric-header">
                    <div class="metric-title">Flutteræ¸²æŸ“</div>
                    <div class="metric-icon" style="background: #fef3c7; color: #f59e0b;">ğŸ“±</div>
                </div>
                <div class="metric-value" id="flutterFPS" style="color: #f59e0b;">0fps</div>
                <div class="metric-target">ç›®æ ‡: 60fps</div>
                <span class="metric-status status-warning" id="flutterStatus">ä¼˜åŒ–ä¸­</span>
                <div class="progress-bar">
                    <div class="progress-fill progress-warning" id="flutterProgress" style="width: 0%"></div>
                </div>
            </div>
            
            <!-- æ•°æ®å‹ç¼©æ€§èƒ½ -->
            <div class="metric-card">
                <div class="metric-header">
                    <div class="metric-title">æ•°æ®å‹ç¼©</div>
                    <div class="metric-icon" style="background: #fce7f3; color: #ec4899;">ğŸ—œï¸</div>
                </div>
                <div class="metric-value" id="compressionRatio" style="color: #ec4899;">0x</div>
                <div class="metric-target">ç›®æ ‡: 37x (3.7GBâ†’100MB)</div>
                <span class="metric-status status-error" id="compressionStatus">å¾…ä¼˜åŒ–</span>
                <div class="progress-bar">
                    <div class="progress-fill progress-error" id="compressionProgress" style="width: 0%"></div>
                </div>
            </div>
            
            <!-- ç¼“å­˜å‘½ä¸­ç‡ -->
            <div class="metric-card">
                <div class="metric-header">
                    <div class="metric-title">ç¼“å­˜å‘½ä¸­ç‡</div>
                    <div class="metric-icon" style="background: #e0e7ff; color: #6366f1;">âš¡</div>
                </div>
                <div class="metric-value" id="cacheHitRate" style="color: #6366f1;">0%</div>
                <div class="metric-target">ç›®æ ‡: >90%</div>
                <span class="metric-status status-success" id="cacheStatus">è‰¯å¥½</span>
                <div class="progress-bar">
                    <div class="progress-fill progress-success" id="cacheProgress" style="width: 0%"></div>
                </div>
            </div>
            
            <!-- å†…å­˜ä½¿ç”¨ -->
            <div class="metric-card">
                <div class="metric-header">
                    <div class="metric-title">å†…å­˜ä½¿ç”¨</div>
                    <div class="metric-icon" style="background: #fef2f2; color: #ef4444;">ğŸ’¾</div>
                </div>
                <div class="metric-value" id="memoryUsage" style="color: #ef4444;">0GB</div>
                <div class="metric-target">å¯ç”¨: <span id="availableMemory">0GB</span></div>
                <span class="metric-status status-success" id="memoryStatus">æ­£å¸¸</span>
                <div class="progress-bar">
                    <div class="progress-fill progress-success" id="memoryProgress" style="width: 0%"></div>
                </div>
            </div>
        </div>
        
        <!-- å®æ—¶æ€§èƒ½å›¾è¡¨ -->
        <div class="chart-container">
            <div class="chart-title">å®æ—¶æ€§èƒ½è¶‹åŠ¿</div>
            <canvas id="performanceChart" width="400" height="150"></canvas>
        </div>
        
        <!-- ä¼˜åŒ–å»ºè®® -->
        <div class="optimization-tips">
            <h2 style="margin-bottom: 20px; color: #333;">ğŸ¯ ä¼˜åŒ–å»ºè®®</h2>
            
            <div class="tip-item">
                <div class="tip-title">PDFæ‰¹å¤„ç†ä¼˜åŒ–</div>
                <div class="tip-description">
                    å½“å‰é…ç½®: <span id="pdfWorkers">16</span>ä¸ªå·¥ä½œè¿›ç¨‹<br>
                    å»ºè®®: ä½¿ç”¨å†…å­˜æ˜ å°„(mmap)å’Œæ‰¹é‡å¤„ç†ï¼Œå¯ç”¨LZ4å‹ç¼©ä¸­é—´ç»“æœ
                </div>
            </div>
            
            <div class="tip-item">
                <div class="tip-title">SQLiteæŸ¥è¯¢ä¼˜åŒ–</div>
                <div class="tip-description">
                    å·²å¯ç”¨: WALæ¨¡å¼, 64MBç¼“å­˜, å†…å­˜ä¸´æ—¶è¡¨<br>
                    å»ºè®®: åˆ›å»ºè¦†ç›–ç´¢å¼•ï¼Œä½¿ç”¨æ‰¹é‡INæŸ¥è¯¢æ›¿ä»£å¤šæ¬¡å•æŸ¥è¯¢
                </div>
            </div>
            
            <div class="tip-item">
                <div class="tip-title">Flutteræ¸²æŸ“ä¼˜åŒ–</div>
                <div class="tip-description">
                    æ¨è: ListView.builder + RepaintBoundary<br>
                    ç¼“å­˜èŒƒå›´: 500åƒç´ ï¼Œå¯ç”¨è™šæ‹Ÿæ»šåŠ¨å’Œæ‡’åŠ è½½
                </div>
            </div>
            
            <div class="tip-item">
                <div class="tip-title">æ•°æ®å‹ç¼©ç­–ç•¥</div>
                <div class="tip-description">
                    æ¨èç®—æ³•: ZSTDçº§åˆ«19 (é«˜å‹ç¼©æ¨¡å¼)<br>
                    é¢„å¤„ç†: æ•°æ®å»é‡ + å¢é‡ç¼–ç  + å­—å…¸è®­ç»ƒ<br>
                    é¢„æœŸæ•ˆæœ: 35-40xå‹ç¼©ç‡ï¼Œ15åˆ†é’Ÿå®Œæˆ3.7GBæ•°æ®
                </div>
            </div>
            
            <div class="tip-item">
                <div class="tip-title">ç¼“å­˜å±‚æ¬¡è®¾è®¡</div>
                <div class="tip-description">
                    L1: å†…å­˜LRUç¼“å­˜ (512MB)<br>
                    L2: Redisç¼“å­˜ (2GB, LZ4å‹ç¼©)<br>
                    L3: SQLiteç£ç›˜ç¼“å­˜ (5GB, ZSTDå‹ç¼©)<br>
                    CDN: é™æ€èµ„æº30å¤©ç¼“å­˜
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // æ¨¡æ‹Ÿæ€§èƒ½æ•°æ®
        let performanceData = {
            labels: [],
            datasets: [
                {
                    label: 'PDFååé‡',
                    data: [],
                    borderColor: '#667eea',
                    tension: 0.4
                },
                {
                    label: 'SQLiteå“åº”',
                    data: [],
                    borderColor: '#10b981',
                    tension: 0.4
                },
                {
                    label: 'Flutter FPS',
                    data: [],
                    borderColor: '#f59e0b',
                    tension: 0.4
                }
            ]
        };
        
        // åˆå§‹åŒ–æ•°æ®
        function initializeData() {
            // ç”Ÿæˆåˆå§‹æ•°æ®ç‚¹
            for (let i = 0; i < 20; i++) {
                const time = new Date(Date.now() - (20 - i) * 60000);
                performanceData.labels.push(time.toLocaleTimeString());
                performanceData.datasets[0].data.push(150 + Math.random() * 100); // PDF
                performanceData.datasets[1].data.push(2 + Math.random() * 4); // SQLite
                performanceData.datasets[2].data.push(50 + Math.random() * 15); // Flutter
            }
            
            updateMetrics();
        }
        
        // æ›´æ–°æŒ‡æ ‡æ˜¾ç¤º
        function updateMetrics() {
            // PDFå¤„ç†
            const pdfValue = 180 + Math.random() * 40;
            document.getElementById('pdfThroughput').textContent = `${pdfValue.toFixed(0)}æ–‡ä»¶/å°æ—¶`;
            document.getElementById('pdfProgress').style.width = `${Math.min(pdfValue / 200 * 100, 100)}%`;
            updateStatus('pdf', pdfValue >= 200);
            
            // SQLiteæŸ¥è¯¢
            const sqliteValue = 3 + Math.random() * 3;
            document.getElementById('sqliteLatency').textContent = `${sqliteValue.toFixed(1)}ms`;
            document.getElementById('sqliteProgress').style.width = `${Math.max(0, 100 - sqliteValue * 20)}%`;
            updateStatus('sqlite', sqliteValue < 5);
            
            // Flutteræ¸²æŸ“
            const flutterValue = 55 + Math.random() * 10;
            document.getElementById('flutterFPS').textContent = `${flutterValue.toFixed(0)}fps`;
            document.getElementById('flutterProgress').style.width = `${Math.min(flutterValue / 60 * 100, 100)}%`;
            updateStatus('flutter', flutterValue >= 60);
            
            // æ•°æ®å‹ç¼©
            const compressionValue = 30 + Math.random() * 15;
            document.getElementById('compressionRatio').textContent = `${compressionValue.toFixed(0)}x`;
            document.getElementById('compressionProgress').style.width = `${Math.min(compressionValue / 37 * 100, 100)}%`;
            updateStatus('compression', compressionValue >= 37);
            
            // ç¼“å­˜å‘½ä¸­ç‡
            const cacheValue = 85 + Math.random() * 10;
            document.getElementById('cacheHitRate').textContent = `${cacheValue.toFixed(0)}%`;
            document.getElementById('cacheProgress').style.width = `${cacheValue}%`;
            updateStatus('cache', cacheValue >= 90);
            
            // å†…å­˜ä½¿ç”¨
            const memoryUsed = 2.5 + Math.random() * 2;
            const memoryTotal = 8;
            document.getElementById('memoryUsage').textContent = `${memoryUsed.toFixed(1)}GB`;
            document.getElementById('availableMemory').textContent = `${(memoryTotal - memoryUsed).toFixed(1)}GB`;
            document.getElementById('memoryProgress').style.width = `${memoryUsed / memoryTotal * 100}%`;
            updateStatus('memory', memoryUsed < memoryTotal * 0.8);
            
            // CPUæ ¸å¿ƒæ•°
            document.getElementById('pdfWorkers').textContent = navigator.hardwareConcurrency * 2 || 16;
        }
        
        // æ›´æ–°çŠ¶æ€æ˜¾ç¤º
        function updateStatus(metric, isGood) {
            const statusElement = document.getElementById(`${metric}Status`);
            const progressElement = document.getElementById(`${metric}Progress`);
            
            if (isGood) {
                statusElement.className = 'metric-status status-success';
                statusElement.textContent = 'æ­£å¸¸';
                progressElement.className = 'progress-fill progress-success';
            } else if (metric === 'compression') {
                statusElement.className = 'metric-status status-error';
                statusElement.textContent = 'éœ€ä¼˜åŒ–';
                progressElement.className = 'progress-fill progress-error';
            } else {
                statusElement.className = 'metric-status status-warning';
                statusElement.textContent = 'ä¼˜åŒ–ä¸­';
                progressElement.className = 'progress-fill progress-warning';
            }
        }
        
        // åˆ·æ–°æ•°æ®
        function refreshData() {
            updateMetrics();
            console.log('æ•°æ®å·²åˆ·æ–°');
            
            // æ˜¾ç¤ºé€šçŸ¥
            showNotification('æ•°æ®å·²æ›´æ–°', 'success');
        }
        
        // è¿è¡ŒåŸºå‡†æµ‹è¯•
        function runBenchmark() {
            showNotification('åŸºå‡†æµ‹è¯•å¼€å§‹è¿è¡Œ...', 'info');
            
            // æ¨¡æ‹Ÿæµ‹è¯•è¿è¡Œ
            setTimeout(() => {
                updateMetrics();
                showNotification('åŸºå‡†æµ‹è¯•å®Œæˆ!', 'success');
            }, 3000);
        }
        
        // ç³»ç»Ÿä¼˜åŒ–
        function optimizeSystem() {
            showNotification('æ­£åœ¨åº”ç”¨ä¼˜åŒ–é…ç½®...', 'info');
            
            setTimeout(() => {
                // æ¨¡æ‹Ÿä¼˜åŒ–åçš„æ”¹è¿›
                document.getElementById('pdfThroughput').textContent = '210æ–‡ä»¶/å°æ—¶';
                document.getElementById('sqliteLatency').textContent = '3.5ms';
                document.getElementById('flutterFPS').textContent = '60fps';
                document.getElementById('compressionRatio').textContent = '38x';
                
                // æ›´æ–°æ‰€æœ‰çŠ¶æ€ä¸ºæˆåŠŸ
                ['pdf', 'sqlite', 'flutter', 'compression', 'cache', 'memory'].forEach(metric => {
                    updateStatus(metric, true);
                });
                
                showNotification('ä¼˜åŒ–å®Œæˆ! æ‰€æœ‰æŒ‡æ ‡è¾¾åˆ°ç›®æ ‡', 'success');
            }, 2000);
        }
        
        // æ˜¾ç¤ºé€šçŸ¥
        function showNotification(message, type) {
            // è¿™é‡Œå¯ä»¥å®ç°æ›´å¤æ‚çš„é€šçŸ¥ç³»ç»Ÿ
            console.log(`[${type}] ${message}`);
        }
        
        // æ›´æ–°æ—¶é—´èŒƒå›´
        function updateTimeRange() {
            const range = document.getElementById('timeRange').value;
            console.log(`æ—¶é—´èŒƒå›´æ›´æ–°ä¸º: ${range}`);
            refreshData();
        }
        
        // è‡ªåŠ¨åˆ·æ–°
        setInterval(() => {
            updateMetrics();
            
            // æ›´æ–°å›¾è¡¨æ•°æ®
            if (performanceData.labels.length > 20) {
                performanceData.labels.shift();
                performanceData.datasets.forEach(dataset => dataset.data.shift());
            }
            
            const now = new Date();
            performanceData.labels.push(now.toLocaleTimeString());
            performanceData.datasets[0].data.push(150 + Math.random() * 100);
            performanceData.datasets[1].data.push(2 + Math.random() * 4);
            performanceData.datasets[2].data.push(50 + Math.random() * 15);
        }, 5000);
        
        // åˆå§‹åŒ–
        window.onload = function() {
            initializeData();
        };
    </script>
</body>
</html>