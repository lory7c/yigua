# 📱 立即在手机上测试易卦APP

## ✅ 当前状态

### 服务器端（已完成）
- ✅ 完整的64卦数据已部署
- ✅ 所有占卜API已实现（六爻、梅花易数、八字等）
- ✅ 周公解梦API已实现
- ✅ 黄历查询API已实现
- ✅ 服务器正在运行：`http://192.168.1.84:8888`

### APP端（已完成）
- ✅ API服务层已创建
- ✅ 数据服务改为服务器中心化
- ✅ 状态管理Provider已实现
- ✅ 配置已更新为：`http://192.168.1.84:8888/api`

## 🚀 立即测试步骤

### 1️⃣ 构建APK

在Windows命令行中运行：
```batch
cd D:\desktop\appp\yigua_app
build_test_apk.bat
```

或者使用现有的构建脚本：
```batch
构建APK.bat
```

### 2️⃣ 安装到手机

1. **找到APK文件**
   - 位置：`build\app\outputs\flutter-apk\app-debug.apk`
   - 大小：约30-50MB

2. **传输到手机**
   - 方法1：通过USB数据线复制
   - 方法2：上传到网盘下载
   - 方法3：使用局域网传输工具

3. **在手机上安装**
   - 打开手机的"文件管理器"
   - 找到APK文件
   - 点击安装（需要允许"安装未知来源应用"）

### 3️⃣ 配置网络连接

1. **确保网络环境**
   - 手机和电脑在同一WiFi网络
   - 电脑IP：192.168.1.84
   - 服务器端口：8888

2. **在APP中配置**（如果需要）
   - 打开APP → 设置
   - 选择"局域网模式"
   - 服务器地址：`http://192.168.1.84:8888/api`
   - 点击"测试连接"

### 4️⃣ 功能测试清单

测试以下功能是否正常：

#### 基础功能
- [ ] 首页加载正常
- [ ] 64卦列表显示完整
- [ ] 点击卦象查看详情
- [ ] 搜索功能正常

#### 占卜功能
- [ ] 六爻起卦
- [ ] 梅花易数
- [ ] 八字排盘
- [ ] 紫微斗数
- [ ] 奇门遁甲
- [ ] 大六壬

#### 其他功能
- [ ] 周公解梦搜索
- [ ] 今日黄历
- [ ] 历史记录保存

## 🔧 常见问题解决

### 问题1：无法连接服务器
**解决方案：**
1. 检查Windows防火墙是否允许8888端口
2. 在管理员CMD运行：
   ```
   netsh advfirewall firewall add rule name="YiGua8888" dir=in action=allow protocol=TCP localport=8888
   ```

### 问题2：服务器未启动
**解决方案：**
在WSL2中运行：
```bash
cd /mnt/d/desktop/appp/yigua_app/server
node server_complete.js
```

### 问题3：手机无法访问
**解决方案：**
1. 确保手机和电脑在同一WiFi
2. 在Windows CMD运行端口转发：
   ```
   netsh interface portproxy add v4tov4 listenport=8888 listenaddress=0.0.0.0 connectport=8888 connectaddress=192.168.74.71
   ```

## 📊 服务器监控

### 查看服务器状态
浏览器访问：`http://192.168.1.84:8888`

### 测试API
- 健康检查：`http://192.168.1.84:8888/api/health`
- 获取64卦：`http://192.168.1.84:8888/api/hexagrams`
- 今日黄历：`http://192.168.1.84:8888/api/calendar/today`

## 🎯 测试目标

确保以下核心功能正常：
1. ✅ APP能连接服务器
2. ✅ 64卦数据完整显示
3. ✅ 占卜功能计算正确
4. ✅ 历史记录能保存
5. ✅ 界面流畅无卡顿

## 💡 优化建议

如果测试顺利，后续可以：
1. 添加用户登录系统
2. 实现云端数据同步
3. 集成真正的AI解卦
4. 添加更多占卜方法
5. 优化UI界面设计

---

**准备就绪！** 现在可以立即构建APK并在手机上测试了。

服务器已经在运行，数据已经准备好，APP代码已经更新完成。

祝测试顺利！ 🎉