# ğŸ“± æ˜“å¦APPå±€åŸŸç½‘è¿æ¥æŒ‡å—

## ğŸš€ å¿«é€Ÿå¯åŠ¨æ­¥éª¤

### ç¬¬ä¸€æ­¥ï¼šå¯åŠ¨æœåŠ¡å™¨

1. **æ‰“å¼€å‘½ä»¤è¡Œ**ï¼ˆWindows Terminalæˆ–CMDï¼‰
2. **è¿›å…¥æœåŠ¡å™¨ç›®å½•**ï¼š
```bash
cd /mnt/d/desktop/appp/yigua_app/server
```

3. **å®‰è£…ä¾èµ–**ï¼ˆé¦–æ¬¡è¿è¡Œï¼‰ï¼š
```bash
npm install
```

4. **å¯åŠ¨æœåŠ¡å™¨**ï¼š
```bash
npm start
```

å¯åŠ¨æˆåŠŸåä¼šæ˜¾ç¤ºï¼š
```
ğŸš€ æ˜“å¦æœåŠ¡å™¨å·²å¯åŠ¨ï¼
ğŸ“± å±€åŸŸç½‘è®¿é—®åœ°å€: http://192.168.1.100:8888
ğŸ’» æœ¬åœ°è®¿é—®åœ°å€: http://localhost:8888
```

### ç¬¬äºŒæ­¥ï¼šæ‰‹æœºè¿æ¥

1. **ç¡®ä¿æ‰‹æœºå’Œç”µè„‘åœ¨åŒä¸€WiFiç½‘ç»œ**
2. **æ‰“å¼€æ˜“å¦APP**
3. **è¿›å…¥è®¾ç½®é¡µé¢**
4. **é€‰æ‹©"å±€åŸŸç½‘è¿æ¥"**
5. **è¾“å…¥ç”µè„‘IPåœ°å€**ï¼ˆå¦‚ï¼š192.168.1.100ï¼‰
6. **ç‚¹å‡»"æµ‹è¯•è¿æ¥"**

## ğŸ”§ é…ç½®æ–‡ä»¶

### åˆ›å»ºAPPé…ç½®æ–‡ä»¶
`lib/config/app_config.dart`:
```dart
class AppConfig {
  // å±€åŸŸç½‘æœåŠ¡å™¨åœ°å€
  static String serverUrl = 'http://192.168.1.100:8888';
  
  // APIç«¯ç‚¹
  static String apiBase = '$serverUrl/api';
  
  // è¿æ¥æµ‹è¯•
  static String healthCheck = '$apiBase/health';
}
```

## ğŸ“Š æµ‹è¯•è¿æ¥

### 1. ç”µè„‘ç«¯æµ‹è¯•
æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼š
- http://localhost:8888/api/health
- http://localhost:8888/api/hexagrams

### 2. æ‰‹æœºç«¯æµ‹è¯•
æ‰‹æœºæµè§ˆå™¨è®¿é—®ï¼š
- http://[ç”µè„‘IP]:8888/api/health

## ğŸ› ï¸ å¸¸è§é—®é¢˜è§£å†³

### é—®é¢˜1ï¼šæ‰¾ä¸åˆ°ç”µè„‘IPåœ°å€
**Windowsç³»ç»Ÿ**ï¼š
```bash
ipconfig
```
æ‰¾åˆ°"æ— çº¿å±€åŸŸç½‘é€‚é…å™¨ WLAN"ä¸‹çš„"IPv4 åœ°å€"

**Mac/Linuxç³»ç»Ÿ**ï¼š
```bash
ifconfig
```
æ‰¾åˆ°"inet"åé¢çš„åœ°å€

### é—®é¢˜2ï¼šæ‰‹æœºæ— æ³•è¿æ¥
1. **æ£€æŸ¥é˜²ç«å¢™**ï¼š
   - Windowsé˜²ç«å¢™å¯èƒ½é˜»æ­¢è¿æ¥
   - ä¸´æ—¶å…³é—­é˜²ç«å¢™æµ‹è¯•
   - æˆ–æ·»åŠ 8888ç«¯å£ä¾‹å¤–

2. **æ£€æŸ¥ç½‘ç»œ**ï¼š
   - ç¡®ä¿åœ¨åŒä¸€WiFi
   - ä¸è¦ç”¨è®¿å®¢ç½‘ç»œ
   - å…³é—­VPN

### é—®é¢˜3ï¼šè¿æ¥ä¸ç¨³å®š
- ä½¿ç”¨5G WiFi
- é è¿‘è·¯ç”±å™¨
- å‡å°‘å¹²æ‰°è®¾å¤‡

## ğŸ“ ç›®å½•ç»“æ„

```
yigua_app/
â”œâ”€â”€ server/              # å±€åŸŸç½‘æœåŠ¡å™¨
â”‚   â”œâ”€â”€ server.js       # æœåŠ¡å™¨ä¸»æ–‡ä»¶
â”‚   â”œâ”€â”€ package.json    # ä¾èµ–é…ç½®
â”‚   â””â”€â”€ setup-ngrok.sh  # å†…ç½‘ç©¿é€è„šæœ¬ï¼ˆå¯é€‰ï¼‰
â”œâ”€â”€ assets/
â”‚   â””â”€â”€ data/
â”‚       â”œâ”€â”€ hexagrams.json    # å¦è±¡æ•°æ®
â”‚       â””â”€â”€ calendar_data.json # é»„å†æ•°æ®
â””â”€â”€ lib/
    â””â”€â”€ services/
        â””â”€â”€ data_service.dart  # æ•°æ®æœåŠ¡
```

## ğŸŒ é«˜çº§åŠŸèƒ½

### ä½¿ç”¨ngrokå®ç°å¤–ç½‘è®¿é—®ï¼ˆå¯é€‰ï¼‰
```bash
# å®‰è£…ngrok
npm install -g ngrok

# å¯åŠ¨ç©¿é€
ngrok http 8888
```

### æ‰¹é‡å¯¼å…¥æ•°æ®
```javascript
// åœ¨server.jsä¸­æ·»åŠ 
app.post('/api/import', (req, res) => {
  const { hexagrams } = req.body;
  // ä¿å­˜åˆ°æ–‡ä»¶
  fs.writeFileSync('hexagrams.json', JSON.stringify(hexagrams));
  res.json({ success: true });
});
```

## ğŸ“± APPç«¯é›†æˆä»£ç 

```dart
// lib/services/local_server_service.dart
import 'package:dio/dio.dart';

class LocalServerService {
  final dio = Dio();
  String baseUrl = '';
  
  // è®¾ç½®æœåŠ¡å™¨åœ°å€
  void setServerUrl(String ip) {
    baseUrl = 'http://$ip:8888/api';
  }
  
  // æµ‹è¯•è¿æ¥
  Future<bool> testConnection() async {
    try {
      final response = await dio.get('$baseUrl/health');
      return response.data['status'] == 'ok';
    } catch (e) {
      return false;
    }
  }
  
  // è·å–å¦è±¡æ•°æ®
  Future<List> getHexagrams() async {
    final response = await dio.get('$baseUrl/hexagrams');
    return response.data;
  }
}
```

## âœ… å¯åŠ¨æ£€æŸ¥æ¸…å•

- [ ] Node.jså·²å®‰è£…ï¼ˆç‰ˆæœ¬14+ï¼‰
- [ ] npmä¾èµ–å·²å®‰è£…
- [ ] é˜²ç«å¢™å·²é…ç½®
- [ ] æ‰‹æœºå’Œç”µè„‘åŒä¸€WiFi
- [ ] æœåŠ¡å™¨æ­£å¸¸å¯åŠ¨
- [ ] IPåœ°å€æ­£ç¡®
- [ ] æµ‹è¯•è¿æ¥æˆåŠŸ

## ğŸ“ æŠ€æœ¯æ”¯æŒ

é‡åˆ°é—®é¢˜æ—¶çš„è°ƒè¯•æ­¥éª¤ï¼š
1. æ£€æŸ¥æœåŠ¡å™¨æ—¥å¿—
2. ä½¿ç”¨Postmanæµ‹è¯•API
3. æŸ¥çœ‹æ‰‹æœºç«¯é”™è¯¯ä¿¡æ¯
4. æ£€æŸ¥ç½‘ç»œæŠ“åŒ…

---

**æç¤º**ï¼šé¦–æ¬¡é…ç½®å¯èƒ½éœ€è¦10-15åˆ†é’Ÿï¼Œé…ç½®æˆåŠŸåä¸‹æ¬¡ç›´æ¥å¯åŠ¨å³å¯ã€‚